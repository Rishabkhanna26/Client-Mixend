{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/mex-end/app/dashboard/page.jsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, LineChart, Line } from 'recharts';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMessage, faUsers, faCircleCheck, faCircleExclamation } from '@fortawesome/free-solid-svg-icons';\n\nexport default function DashboardPage() {\n\tconst [stats, setStats] = useState(null);\n\tconst [loading, setLoading] = useState(true);\n\tconst [messages, setMessages] = useState([]);\n\tconst [users, setUsers] = useState([]);\n\n\tuseEffect(() => {\n\t\tfetchDashboardData();\n\t}, []);\n\n\tasync function fetchDashboardData() {\n\t\ttry {\n\t\t\tconst [statsRes, messagesRes, usersRes] = await Promise.all([\n\t\t\t\tfetch('/api/dashboard/stats'),\n\t\t\t\tfetch('/api/messages'),\n\t\t\t\tfetch('/api/users')\n\t\t\t]);\n\n\t\t\tconst statsData = await statsRes.json();\n\t\t\tconst messagesData = await messagesRes.json();\n\t\t\tconst usersData = await usersRes.json();\n\n\t\t\tsetStats(statsData.data);\n\t\t\tsetMessages(messagesData.data || []);\n\t\t\tsetUsers(usersData.data || []);\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to fetch dashboard data:', error);\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\tif (loading) {\n\t\treturn (\n\t\t\t<div className=\"flex items-center justify-center h-screen\">\n\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-aa-orange mx-auto mb-4\"></div>\n\t\t\t\t\t<p className=\"text-gray-600\">Loading dashboard...</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst chartData = [\n\t\t{ name: 'Users', value: stats?.total_users || 0 },\n\t\t{ name: 'Messages', value: stats?.incoming_messages || 0 },\n\t\t{ name: 'Requirements', value: stats?.active_requirements || 0 },\n\t\t{ name: 'Open Needs', value: stats?.open_needs || 0 }\n\t];\n\n\tconst recentMessages = messages.slice(0, 5);\n\n\treturn (\n\t\t<div className=\"p-6 space-y-6\">\n\t\t\t{/* Header */}\n\t\t\t<div>\n\t\t\t\t<h1 className=\"text-4xl font-bold text-gray-900\">Dashboard</h1>\n\t\t\t\t<p className=\"text-gray-600 mt-2\">Welcome back! Here's your business overview.</p>\n\t\t\t</div>\n\n\t\t\t{/* Stats Grid */}\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n\t\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition\">\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-gray-600 text-sm font-medium\">Total Users</p>\n\t\t\t\t\t\t\t<h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stats?.total_users || 0}</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faUsers} className=\"text-aa-orange\" style={{ fontSize: 40 }} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition\">\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-gray-600 text-sm font-medium\">Incoming Messages</p>\n\t\t\t\t\t\t\t<h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stats?.incoming_messages || 0}</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faMessage} className=\"text-blue-500\" style={{ fontSize: 40 }} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition\">\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-gray-600 text-sm font-medium\">Active Requirements</p>\n\t\t\t\t\t\t\t<h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stats?.active_requirements || 0}</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faCircleCheck} className=\"text-green-500\" style={{ fontSize: 40 }} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition\">\n\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p className=\"text-gray-600 text-sm font-medium\">Open Needs</p>\n\t\t\t\t\t\t\t<h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stats?.open_needs || 0}</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faCircleExclamation} className=\"text-aa-orange\" style={{ fontSize: 40 }} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Charts Row */}\n\t\t\t<div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n\t\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n\t\t\t\t\t<h2 className=\"text-xl font-bold text-gray-900 mb-4\">Overview</h2>\n\t\t\t\t\t<ResponsiveContainer width=\"100%\" height={300}>\n\t\t\t\t\t\t<BarChart data={chartData}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t\t\t<YAxis />\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Bar dataKey=\"value\" fill=\"#FF6B35\" radius={[8, 8, 0, 0]} />\n\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n\t\t\t\t\t<h2 className=\"text-xl font-bold text-gray-900 mb-4\">Growth Trend</h2>\n\t\t\t\t\t<ResponsiveContainer width=\"100%\" height={300}>\n\t\t\t\t\t\t<LineChart data={chartData}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t\t\t<YAxis />\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Line type=\"monotone\" dataKey=\"value\" stroke=\"#FF6B35\" strokeWidth={2} dot={{ fill: '#FF6B35', r: 5 }} />\n\t\t\t\t\t\t</LineChart>\n\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Recent Activity */}\n\t\t\t<div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n\t\t\t\t<h2 className=\"text-xl font-bold text-gray-900 mb-4\">Recent Messages</h2>\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t{recentMessages.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-gray-500 text-center py-8\">No recent messages</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trecentMessages.map((msg) => (\n\t\t\t\t\t\t\t<div key={msg.id} className=\"flex items-start gap-3 pb-3 border-b last:border-b-0\">\n\t\t\t\t\t\t\t\t<div className=\"w-10 h-10 rounded-full bg-aa-orange/20 flex items-center justify-center flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-semibold text-aa-orange\">{msg.user_name?.charAt(0) || 'U'}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-semibold text-gray-900\">{msg.user_name || 'Unknown'}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600\">{msg.message_text}</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500 mt-1\">{new Date(msg.created_at).toLocaleString()}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className={`text-xs px-2 py-1 rounded ${\n\t\t\t\t\t\t\t\t\tmsg.message_type === 'incoming' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'\n\t\t\t\t\t\t\t\t}`}>\n\t\t\t\t\t\t\t\t\t{msg.message_type}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}}]
}