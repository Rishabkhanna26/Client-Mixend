{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/mex-end/app/inbox/page.jsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEnvelope, faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\n\nexport default function InboxPage() {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState('');\n\n  useEffect(() => {\n    fetchMessages();\n  }, []);\n\n  async function fetchMessages() {\n    try {\n      const response = await fetch('/api/messages');\n      const data = await response.json();\n      setMessages(data.data || []);\n    } catch (error) {\n      console.error('Failed to fetch messages:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const filteredMessages = messages.filter(msg =>\n    msg.user_name?.toLowerCase().includes(search.toLowerCase()) ||\n    msg.phone?.includes(search) ||\n    msg.message_text?.toLowerCase().includes(search.toLowerCase())\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-aa-orange mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading messages...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\n          <FontAwesomeIcon icon={faEnvelope} className=\"text-aa-orange\" style={{ fontSize: 32 }} />\n          Inbox\n        </h1>\n        \n        <div className=\"relative\">\n          <FontAwesomeIcon\n            icon={faMagnifyingGlass}\n            className=\"absolute left-3 top-3 text-gray-400\"\n            style={{ fontSize: 20 }}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Search by name, phone, or message...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-aa-orange\"\n          />\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {filteredMessages.length === 0 ? (\n          <div className=\"text-center py-12 bg-gray-50 rounded-lg\">\n            <FontAwesomeIcon icon={faEnvelope} className=\"mx-auto text-gray-400 mb-2\" style={{ fontSize: 48 }} />\n            <p className=\"text-gray-500\">No messages found</p>\n          </div>\n        ) : (\n          filteredMessages.map((msg) => (\n            <div\n              key={msg.id}\n              className=\"bg-white p-4 rounded-lg border border-gray-200 hover:shadow-md transition cursor-pointer\"\n            >\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-gray-900\">{msg.user_name} ({msg.phone})</h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">{msg.message_text}</p>\n                </div>\n                <span\n                  className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                    msg.message_type === 'incoming'\n                      ? 'bg-blue-100 text-blue-800'\n                      : 'bg-green-100 text-green-800'\n                  }`}\n                >\n                  {msg.message_type}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center mt-2\">\n                <span className=\"text-xs text-gray-500\">\n                  {new Date(msg.created_at).toLocaleDateString()} {new Date(msg.created_at).toLocaleTimeString()}\n                </span>\n                <span className={`text-xs px-2 py-1 rounded ${\n                  msg.status === 'read' ? 'bg-gray-100 text-gray-700' : 'bg-aa-orange/10 text-aa-orange'\n                }`}>\n                  {msg.status}\n                </span>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,eAAe;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,YAAY,KAAK,IAAI,IAAI,EAAE;QAC7B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,mBAAmB,SAAS,MAAM,CAAC,CAAA,MACvC,IAAI,SAAS,EAAE,cAAc,SAAS,OAAO,WAAW,OACxD,IAAI,KAAK,EAAE,SAAS,WACpB,IAAI,YAAY,EAAE,cAAc,SAAS,OAAO,WAAW;IAG7D,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAIrC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,uLAAe;gCAAC,MAAM,sLAAU;gCAAE,WAAU;gCAAiB,OAAO;oCAAE,UAAU;gCAAG;;;;;;4BAAK;;;;;;;kCAI3F,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,uLAAe;gCACd,MAAM,6LAAiB;gCACvB,WAAU;gCACV,OAAO;oCAAE,UAAU;gCAAG;;;;;;0CAExB,8OAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,WAAU;;;;;;;;;;;;;;;;;;0BAKhB,8OAAC;gBAAI,WAAU;0BACZ,iBAAiB,MAAM,KAAK,kBAC3B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uLAAe;4BAAC,MAAM,sLAAU;4BAAE,WAAU;4BAA6B,OAAO;gCAAE,UAAU;4BAAG;;;;;;sCAChG,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;2BAG/B,iBAAiB,GAAG,CAAC,CAAC,oBACpB,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;;oDAA+B,IAAI,SAAS;oDAAC;oDAAG,IAAI,KAAK;oDAAC;;;;;;;0DACxE,8OAAC;gDAAE,WAAU;0DAA8B,IAAI,YAAY;;;;;;;;;;;;kDAE7D,8OAAC;wCACC,WAAW,CAAC,6CAA6C,EACvD,IAAI,YAAY,KAAK,aACjB,8BACA,+BACJ;kDAED,IAAI,YAAY;;;;;;;;;;;;0CAGrB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;;4CACb,IAAI,KAAK,IAAI,UAAU,EAAE,kBAAkB;4CAAG;4CAAE,IAAI,KAAK,IAAI,UAAU,EAAE,kBAAkB;;;;;;;kDAE9F,8OAAC;wCAAK,WAAW,CAAC,0BAA0B,EAC1C,IAAI,MAAM,KAAK,SAAS,8BAA8B,kCACtD;kDACC,IAAI,MAAM;;;;;;;;;;;;;uBAzBV,IAAI,EAAE;;;;;;;;;;;;;;;;AAkCzB"}}]
}